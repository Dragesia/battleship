(()=>{"use strict";function e(){let e=[...Array(10)].map((e=>Array(10)));for(let a=0;a<10;a++)for(let i=0;i<10;i++)e[a][i]={ship:"undefined",isAvailable:!0};return e}function a(){return{allShips:[],gameboard:e(),missed:[],placeShip(e,a,i,t){let r={length:l=t,hit:0,isSunk:()=>l==hit};var l;if(this.allShips.push(r),"vertical"==i){a+t>10&&(a=10-t);for(let i=a;i<a+t;i++)this.gameboard[e][i].ship=r}else if("horizontal"==i){e+t>10&&(e=10-t);for(let i=e;i<e+t;i++)this.gameboard[i][a].ship=r}},receiveAttack(e,a){"undefined"!=this.gameboard[e][a].ship?this.gameboard[e][a].hit++:this.missed.includes([e,a])||this.missed.push([e,a]),this.gameboard[e][a].isAvailable=!1},isAllSunk(){return this.allShips.forEach((e=>{if(!e.isSunk())return!1})),!0},renderPlayerGameboard(){let e=document.querySelector(".gameboard");e.innerHTML="";for(let a=0;a<10;a++)for(let i=0;i<10;i++){let t=document.createElement("div");t.onclick=()=>{let e=[...t.parentElement.children].indexOf(t),a=Math.floor(e/10),i=e%10;this.placeShip(a,i,"vertical",5),this.renderPlayerGameboard()},"undefined"==this.gameboard[a][i].ship&&this.gameboard[a][i].isAvailable?t.classList.add("water"):"undefined"!=this.gameboard[a][i].ship||this.gameboard[a][i].isAvailable?this.gameboard[a][i].isAvailable?t.classList.add("ship"):this.gameboard[a][i].isAvailable||t.classList.add("ship-hit"):t.classList.add("water-hit"),e.appendChild(t)}}}}let i=a(),t=function(e){return{playRandom:()=>{let a=Math.floor(10*Math.random()),i=Math.floor(10*Math.random());return console.log(a,i),!!e.gameboard[a][i].isAvailable&&(e.receiveAttack(a,i),!0)}}}(i);i.placeShip(1,9,"vertical",4),t.playRandom(),document.querySelector(".gameboard"),a().renderPlayerGameboard()})();